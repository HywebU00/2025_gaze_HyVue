import{v as I,p as A,c as D,m as n,ak as E,at as ke,az as F,E as O,ap as $,aA as he,r as G,s as L,D as ne,q as J,aB as j,aC as le,G as re,H as S,b as ie,aD as ye,o as Ve,L as ge,A as De,al as be,M as Pe,_ as xe,t as Me,w as B,n as pe}from"./index-QyD-Ly4E.js";import{V as Ce}from"./VMenu-Bhhhurt0.js";import{V as Se,b as _e}from"./VCard-DLsEuUzQ.js";import{V as we}from"./VDivider-CYt4tD9y.js";import{V as _}from"./VBtn-B5-L1YUC.js";import"./VRow-B-0CJPle.js";import{c as de}from"./createSimpleFunctional-m1kGCurk.js";import{u as T,b as ue,M as oe,V as z}from"./index-DtL2SXIg.js";import{b as Ae}from"./index-D3S9Y3k5.js";import{V as K,m as Ye}from"./VSheet-DYU1uJ8I.js";import{V as Oe}from"./VTextField-C9pmlnRw.js";const Ie=de("v-spacer","div","VSpacer"),se=A({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:E,default:"$next"},prevIcon:{type:E,default:"$prev"},modeIcon:{type:E,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Q=I()({name:"VDatePickerControls",props:se(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,a){let{emit:m}=a;const u=D(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),t=D(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),s=D(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),r=D(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function o(){m("click:prev")}function l(){m("click:next")}function i(){m("click:year")}function k(){m("click:month")}return T(()=>n("div",{class:["v-date-picker-controls"]},[n(_,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:u.value,text:e.text,variant:"text",rounded:!0,onClick:k},null),n(_,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:t.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:i},null),n(Ie,null,null),n("div",{class:"v-date-picker-controls__month"},[n(_,{"data-testid":"prev-month",disabled:s.value,icon:e.prevIcon,variant:"text",onClick:o},null),n(_,{"data-testid":"next-month",disabled:r.value,icon:e.nextIcon,variant:"text",onClick:l},null)])])),{}}}),We=A({appendIcon:E,color:String,header:String,transition:String,onClick:ke()},"VDatePickerHeader"),X=I()({name:"VDatePickerHeader",props:We(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,a){let{emit:m,slots:u}=a;const{backgroundColorClasses:t,backgroundColorStyles:s}=ue(e,"color");function r(){m("click")}function o(){m("click:append")}return T(()=>{const l=!!(u.default||e.header),i=!!(u.append||e.appendIcon);return n("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},t.value],style:s.value,onClick:r},[u.prepend&&n("div",{key:"prepend",class:"v-date-picker-header__prepend"},[u.prepend()]),l&&n(oe,{key:"content",name:e.transition},{default:()=>{var k;return[n("div",{key:e.header,class:"v-date-picker-header__content"},[((k=u.default)==null?void 0:k.call(u))??e.header])]}}),i&&n("div",{class:"v-date-picker-header__append"},[u.append?n(z,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var k;return[(k=u.append)==null?void 0:k.call(u)]}}):n(_,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:o},null)])])}),{}}}),Ne=A({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function Be(e){const a=F(),m=O(e,"modelValue",[],f=>$(f)),u=D(()=>e.displayValue?a.date(e.displayValue):m.value.length>0?a.date(m.value[0]):e.min?a.date(e.min):Array.isArray(e.allowedDates)?a.date(e.allowedDates[0]):a.date()),t=O(e,"year",void 0,f=>{const V=f!=null?Number(f):a.getYear(u.value);return a.startOfYear(a.setYear(a.date(),V))},f=>a.getYear(f)),s=O(e,"month",void 0,f=>{const V=f!=null?Number(f):a.getMonth(u.value),h=a.setYear(a.startOfMonth(a.date()),a.getYear(t.value));return a.setMonth(h,V)},f=>a.getMonth(f)),r=D(()=>e.firstDayOfWeek??e.weekdays[0]),o=D(()=>{const f=Number(e.firstDayOfWeek??0);return e.weekdays.map(V=>(V+f)%7)}),l=D(()=>{const f=a.getWeekArray(s.value,r.value),V=f.flat(),h=6*7;if(e.weeksInMonth==="static"&&V.length<h){const y=V[V.length-1];let d=[];for(let P=1;P<=h-V.length;P++)d.push(a.addDays(y,P)),P%7===0&&(f.push(d),d=[])}return f});function i(f,V){return f.filter(h=>o.value.includes(a.toJsDate(h).getDay())).map((h,y)=>{const d=a.toISO(h),P=!a.isSameMonth(h,s.value),C=a.isSameDay(h,a.startOfMonth(s.value)),M=a.isSameDay(h,a.endOfMonth(s.value)),W=a.isSameDay(h,s.value);return{date:h,isoDate:d,formatted:a.format(h,"keyboardDate"),year:a.getYear(h),month:a.getMonth(h),isDisabled:w(h),isWeekStart:y%7===0,isWeekEnd:y%7===6,isToday:a.isSameDay(h,V),isAdjacent:P,isHidden:P&&!e.showAdjacentMonths,isStart:C,isSelected:m.value.some(Y=>a.isSameDay(h,Y)),isEnd:M,isSame:W,localized:a.format(h,"dayOfMonth")}})}const k=D(()=>{const f=a.startOfWeek(u.value,e.firstDayOfWeek),V=[];for(let y=0;y<=6;y++)V.push(a.addDays(f,y));const h=a.date();return i(V,h)}),c=D(()=>{const f=l.value.flat(),V=a.date();return i(f,V)}),g=D(()=>l.value.map(f=>f.length?he(a,f[0]):null));function w(f){if(e.disabled)return!0;const V=a.date(f);return e.min&&a.isAfter(a.date(e.min),V)||e.max&&a.isAfter(V,a.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(h=>a.isSameDay(a.date(h),V)):typeof e.allowedDates=="function"?!e.allowedDates(V):!1}return{displayValue:u,daysInMonth:c,daysInWeek:k,genDays:i,model:m,weeksInMonth:l,weekDays:o,weekNumbers:g}}const ce=A({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...j(Ne(),["displayValue"])},"VDatePickerMonth"),Z=I()({name:"VDatePickerMonth",props:ce(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,a){let{emit:m,slots:u}=a;const t=G(),{daysInMonth:s,model:r,weekNumbers:o}=Be(e),l=F(),i=L(),k=L(),c=L(!1),g=D(()=>c.value?e.reverseTransition:e.transition);e.multiple==="range"&&r.value.length>0&&(i.value=r.value[0],r.value.length>1&&(k.value=r.value[r.value.length-1]));const w=D(()=>{const y=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return r.value.length>=y});ne(s,(y,d)=>{d&&(c.value=l.isBefore(y[0].date,d[0].date))});function f(y){const d=l.startOfDay(y);if(r.value.length===0?i.value=void 0:r.value.length===1&&(i.value=r.value[0],k.value=void 0),!i.value)i.value=d,r.value=[i.value];else if(k.value)i.value=y,k.value=void 0,r.value=[i.value];else{if(l.isSameDay(d,i.value)){i.value=void 0,r.value=[];return}else l.isBefore(d,i.value)?(k.value=l.endOfDay(i.value),i.value=d):k.value=l.endOfDay(d);const P=l.getDiff(k.value,i.value,"days"),C=[i.value];for(let M=1;M<P;M++){const W=l.addDays(i.value,M);C.push(W)}C.push(k.value),r.value=C}}function V(y){const d=r.value.findIndex(P=>l.isSameDay(P,y));if(d===-1)r.value=[...r.value,y];else{const P=[...r.value];P.splice(d,1),r.value=P}}function h(y){e.multiple==="range"?f(y):e.multiple?V(y):r.value=[y]}return()=>n("div",{class:"v-date-picker-month"},[e.showWeek&&n("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&n("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[J(" ")]),o.value.map(y=>n("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[y]))]),n(oe,{name:g.value},{default:()=>{var y;return[n("div",{ref:t,key:(y=s.value[0].date)==null?void 0:y.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&l.getWeekdays(e.firstDayOfWeek).map(d=>n("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[d])),s.value.map((d,P)=>{const C={props:{onClick:()=>h(d.date)},item:d,i:P};return w.value&&!d.isSelected&&(d.isDisabled=!0),n("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":d.isAdjacent,"v-date-picker-month__day--hide-adjacent":d.isHidden,"v-date-picker-month__day--selected":d.isSelected,"v-date-picker-month__day--week-end":d.isWeekEnd,"v-date-picker-month__day--week-start":d.isWeekStart}],"data-v-date":d.isDisabled?void 0:d.isoDate},[(e.showAdjacentMonths||!d.isAdjacent)&&n(z,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(d.isSelected||d.isToday)&&!d.isDisabled?e.color:void 0,disabled:d.isDisabled,icon:!0,ripple:!1,text:d.localized,variant:d.isDisabled?d.isToday?"outlined":"text":d.isToday&&!d.isSelected?"outlined":"flat",onClick:()=>h(d.date)}}},{default:()=>{var M;return[((M=u.day)==null?void 0:M.call(u,C))??n(_,C.props,null)]}})])})])]}})])}}),ve=A({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),ee=I()({name:"VDatePickerMonths",props:ve(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:m,slots:u}=a;const t=F(),s=O(e,"modelValue"),r=D(()=>{let o=t.startOfYear(t.date());return e.year&&(o=t.setYear(o,e.year)),le(12).map(l=>{const i=t.format(o,"monthShort"),k=!!(e.min&&t.isAfter(t.startOfMonth(t.date(e.min)),o)||e.max&&t.isAfter(o,t.startOfMonth(t.date(e.max))));return o=t.getNextMonth(o),{isDisabled:k,text:i,value:l}})});return re(()=>{s.value=s.value??t.getMonth(t.date())}),T(()=>n("div",{class:"v-date-picker-months",style:{height:ie(e.height)}},[n("div",{class:"v-date-picker-months__content"},[r.value.map((o,l)=>{var c;const i={active:s.value===l,color:s.value===l?e.color:void 0,disabled:o.isDisabled,rounded:!0,text:o.text,variant:s.value===o.value?"flat":"text",onClick:()=>k(l)};function k(g){if(s.value===g){m("update:modelValue",s.value);return}s.value=g}return((c=u.month)==null?void 0:c.call(u,{month:o,i:l,props:i}))??n(_,S({key:"month"},i),null)})])])),{}}}),me=A({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),te=I()({name:"VDatePickerYears",props:me(),emits:{"update:modelValue":e=>!0},setup(e,a){let{emit:m,slots:u}=a;const t=F(),s=O(e,"modelValue"),r=D(()=>{const l=t.getYear(t.date());let i=l-100,k=l+52;e.min&&(i=t.getYear(t.date(e.min))),e.max&&(k=t.getYear(t.date(e.max)));let c=t.startOfYear(t.date());return c=t.setYear(c,i),le(k-i+1,i).map(g=>{const w=t.format(c,"year");return c=t.setYear(c,t.getYear(c)+1),{text:w,value:g}})});re(()=>{s.value=s.value??t.getYear(t.date())});const o=ye();return Ve(async()=>{var l;await ge(),(l=o.el)==null||l.scrollIntoView({block:"center"})}),T(()=>n("div",{class:"v-date-picker-years",style:{height:ie(e.height)}},[n("div",{class:"v-date-picker-years__content"},[r.value.map((l,i)=>{var c;const k={ref:s.value===l.value?o:void 0,active:s.value===l.value,color:s.value===l.value?e.color:void 0,rounded:!0,text:l.text,variant:s.value===l.value?"flat":"text",onClick:()=>{if(s.value===l.value){m("update:modelValue",s.value);return}s.value=l.value}};return((c=u.year)==null?void 0:c.call(u,{year:l,i,props:k}))??n(_,S({key:"month"},k),null)})])])),{}}}),Te=de("v-picker-title"),fe=A({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Ye()},"VPicker"),ae=I()({name:"VPicker",props:fe(),setup(e,a){let{slots:m}=a;const{backgroundColorClasses:u,backgroundColorStyles:t}=ue(De(e,"color"));return T(()=>{const s=K.filterProps(e),r=!!(e.title||m.title);return n(K,S(s,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!m.actions},e.class],style:e.style}),{default:()=>{var o;return[!e.hideHeader&&n("div",{key:"header",class:[u.value],style:[t.value]},[r&&n(Te,{key:"picker-title"},{default:()=>{var l;return[((l=m.title)==null?void 0:l.call(m))??e.title]}}),m.header&&n("div",{class:"v-picker__header"},[m.header()])]),n("div",{class:"v-picker__body"},[(o=m.default)==null?void 0:o.call(m)]),m.actions&&n(z,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[n("div",{class:"v-picker__actions"},[m.actions()])]})]}})}),{}}}),Ue=A({header:{type:String,default:"$vuetify.datePicker.header"},...se(),...ce({weeksInMonth:"static"}),...j(ve(),["modelValue"]),...j(me(),["modelValue"]),...fe({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),He=I()({name:"VDatePicker",props:Ue(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,a){let{emit:m,slots:u}=a;const t=F(),{t:s}=be(),r=O(e,"modelValue",void 0,v=>$(v),v=>e.multiple?v:v[0]),o=O(e,"viewMode"),l=D(()=>{const v=t.date(e.min);return e.min&&t.isValid(v)?v:null}),i=D(()=>{const v=t.date(e.max);return e.max&&t.isValid(v)?v:null}),k=D(()=>{var p;const v=t.date();let b=v;return(p=r.value)!=null&&p[0]?b=t.date(r.value[0]):l.value&&t.isBefore(v,l.value)?b=l.value:i.value&&t.isAfter(v,i.value)&&(b=i.value),b&&t.isValid(b)?b:v}),c=G(Number(e.month??t.getMonth(t.startOfMonth(k.value)))),g=G(Number(e.year??t.getYear(t.startOfYear(t.setMonth(k.value,c.value))))),w=L(!1),f=D(()=>e.multiple&&r.value.length>1?s("$vuetify.datePicker.itemsSelected",r.value.length):r.value[0]&&t.isValid(r.value[0])?t.format(t.date(r.value[0]),"normalDateWithWeekday"):s(e.header)),V=D(()=>{let v=t.date();return v=t.setDate(v,1),v=t.setMonth(v,c.value),v=t.setYear(v,g.value),t.format(v,"monthAndYear")}),h=D(()=>`date-picker-header${w.value?"-reverse":""}-transition`),y=D(()=>{if(e.disabled)return!0;const v=[];if(o.value!=="month")v.push("prev","next");else{let b=t.date();if(b=t.startOfMonth(b),b=t.setMonth(b,c.value),b=t.setYear(b,g.value),l.value){const p=t.addDays(t.startOfMonth(b),-1);t.isAfter(l.value,p)&&v.push("prev")}if(i.value){const p=t.addDays(t.endOfMonth(b),1);t.isAfter(p,i.value)&&v.push("next")}}return v});function d(){c.value<11?c.value++:(g.value++,c.value=0,U(g.value)),Y(c.value)}function P(){c.value>0?c.value--:(g.value--,c.value=11,U(g.value)),Y(c.value)}function C(){o.value="month"}function M(){o.value=o.value==="months"?"month":"months"}function W(){o.value=o.value==="year"?"month":"year"}function Y(v){o.value==="months"&&M(),m("update:month",v)}function U(v){o.value==="year"&&W(),m("update:year",v)}return ne(r,(v,b)=>{const p=$(b),H=$(v);if(!H.length)return;const q=t.date(p[p.length-1]),R=t.date(H[H.length-1]),N=t.getMonth(R),x=t.getYear(R);N!==c.value&&(c.value=N,Y(c.value)),x!==g.value&&(g.value=x,U(g.value)),w.value=t.isBefore(q,R)}),T(()=>{const v=ae.filterProps(e),b=Q.filterProps(e),p=X.filterProps(e),H=Z.filterProps(e),q=j(ee.filterProps(e),["modelValue"]),R=j(te.filterProps(e),["modelValue"]),N={header:f.value,transition:h.value};return n(ae,S(v,{class:["v-date-picker",`v-date-picker--${o.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var x;return((x=u.title)==null?void 0:x.call(u))??n("div",{class:"v-date-picker__title"},[s(e.title)])},header:()=>u.header?n(z,{defaults:{VDatePickerHeader:{...N}}},{default:()=>{var x;return[(x=u.header)==null?void 0:x.call(u,N)]}}):n(X,S({key:"header"},p,N,{onClick:o.value!=="month"?C:void 0}),{...u,default:void 0}),default:()=>n(Pe,null,[n(Q,S(b,{disabled:y.value,text:V.value,"onClick:next":d,"onClick:prev":P,"onClick:month":M,"onClick:year":W}),null),n(Ae,{hideOnLeave:!0},{default:()=>[o.value==="months"?n(ee,S({key:"date-picker-months"},q,{modelValue:c.value,"onUpdate:modelValue":[x=>c.value=x,Y],min:l.value,max:i.value,year:g.value}),null):o.value==="year"?n(te,S({key:"date-picker-years"},R,{modelValue:g.value,"onUpdate:modelValue":[x=>g.value=x,U],min:l.value,max:i.value}),null):n(Z,S({key:"date-picker-month"},H,{modelValue:r.value,"onUpdate:modelValue":x=>r.value=x,month:c.value,"onUpdate:month":[x=>c.value=x,Y],year:g.value,"onUpdate:year":[x=>g.value=x,U],min:l.value,max:i.value}),null)]})]),actions:u.actions})}),{}}}),Re={data(){return{menu:!1,date:null,formattedDate:""}},methods:{formatted(){this.date&&(this.formattedDate=this.date.toLocaleDateString("en-AU"))}}};function je(e,a,m,u,t,s){return pe(),Me(Ce,{modelValue:t.menu,"onUpdate:modelValue":a[4]||(a[4]=r=>t.menu=r),"close-on-content-click":!1,location:"center"},{activator:B(({props:r})=>[n(Oe,S({label:"日期選擇"},r,{"hide-details":"auto",density:"compact","single-line":"",variant:"outlined",modelValue:t.formattedDate,"onUpdate:modelValue":a[0]||(a[0]=o=>t.formattedDate=o),"prepend-inner-icon":"mdi-calendar-range"}),null,16,["modelValue"])]),default:B(()=>[n(Se,{"min-width":"300"},{default:B(()=>[n(we),n(He,{"hide-header":"",modelValue:t.date,"onUpdate:modelValue":a[1]||(a[1]=r=>t.date=r)},null,8,["modelValue"]),n(_e,null,{default:B(()=>[n(_,{variant:"text",onClick:a[2]||(a[2]=r=>t.menu=!1)},{default:B(()=>a[5]||(a[5]=[J(" 取消 ")])),_:1}),n(_,{color:"primary",variant:"text",onClick:a[3]||(a[3]=r=>{s.formatted(),t.menu=!1})},{default:B(()=>a[6]||(a[6]=[J(" 確認 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}const Ze=xe(Re,[["render",je]]);export{Ze as d};
